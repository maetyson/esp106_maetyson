library(knitr)
tab <- cbind(Name=c("speciesid", "speciesname", "taxon", "conservation status", "listed"), Description = c("unique ID", "scientific name", "Species group", "Conservation status in North America, according to   [NatureServe](https://www.natureserve.org/conservation-tools/conservation-rank-calculator): 1 = Critically Imperiled; 2 = Imperiled; 3 = Vulnerable; 4 = Apparently Secure; 5 = Secure; UNK = Unknown; Prob. Extinct = Probably Extinct; Extinct", "Is the species listed as threatened or endangered under the US Endangered Species Act: 0 = No; 1 = Yes"))
knitr::kable(tab, caption ='Table 1. Variables in "consevationdata.csv"' )
setwd("~/GitHub/esp106_maetyson/Midterm1")
library(knitr)
tab <- cbind(Name=c("speciesid", "speciesname", "taxon", "conservation status", "listed"), Description = c("unique ID", "scientific name", "Species group", "Conservation status in North America, according to   [NatureServe](https://www.natureserve.org/conservation-tools/conservation-rank-calculator): 1 = Critically Imperiled; 2 = Imperiled; 3 = Vulnerable; 4 = Apparently Secure; 5 = Secure; UNK = Unknown; Prob. Extinct = Probably Extinct; Extinct", "Is the species listed as threatened or endangered under the US Endangered Species Act: 0 = No; 1 = Yes"))
knitr::kable(tab, caption ='Table 1. Variables in "consevationdata.csv"' )
conservation_data <- read.csv("conservationdata.csv")
library(ggplot2)
View(conservation_data)
tab <- cbind(Name=c("speciesid", "speciesname", "taxon", "conservation status", "listed"), Description = c("unique ID", "scientific name", "Species group", "Conservation status in North America, according to   [NatureServe](https://www.natureserve.org/conservation-tools/conservation-rank-calculator): 1 = Critically Imperiled; 2 = Imperiled; 3 = Vulnerable; 4 = Apparently Secure; 5 = Secure; UNK = Unknown; Prob. Extinct = Probably Extinct; Extinct", "Is the species listed as threatened or endangered under the US Endangered Species Act: 0 = No; 1 = Yes"))
knitr::kable(tab, caption ='Table 1. Variables in "consevationdata.csv"' )
conservation_data <- read.csv("conservationdata.csv")
endangered_list <- mean(conservation_data$listed)
endangered_list
endangered_list <- table(conservation_data$listed)
##used mean function because the data set uses 1's and 0's so when all added together they just be divided by the total
endangered_list
total_fraction_listed <- endangered_list/conservation_data$speciesid
total_fraction_listed <- conservation_data$listed/conservation_data$speciesid
total_fraction_listed
total_fraction_listed <- endangered_list/conservation_data$speciesid
total_fraction_listed <- 1617/53658
endangered_list_alt <- mean(conservation_data$listed)
endagered_list_alt
endangered_list_alt
abs_species<- subset(conservation_data, subset= taxon)
##abs_species<- subset(conservation_data, subset= taxon)
taxon_sum <- data.frame(
taxon_name = names(counts),
num_species = as.vectors (counts),
fraction_total_taxon = as.vector(counts)/nrow(conservation_data)
)
taxon_sum
taxon_sum
abs_species<- subset(conservation_data, subset == "taxon")
abs_species<- subset(conservation_data, subset = "taxon")
abs_species <- subset(conservation_data, taxon = c("Fungi","Invertebrates","Fishes","Bird","Reptiles","Amphibians","Mammals") )
taxon_summary <- data.frame(
taxon_group = names(counts),
number_of_species = as.vector(counts),
fraction_of_total = as.vector(counts) / nrow(conservation)
)
##abs_species <- subset(conservation_data, taxon = c("Fungi","Invertebrates","Fishes","Bird","Reptiles","Amphibians","Mammals") )
counts <- table (conservation_data$taxon)
taxon_summary <- data.frame(
taxon_group = names(counts),
number_of_species = as.vector(counts),
fraction_of_total = as.vector(counts) / nrow(conservation)
)
taxon_summary <- data.frame(
taxon_group = names(counts),
number_of_species = as.vector(counts),
fraction_of_total = as.vector(counts) / nrow(conservation_data)
)
taxon_summary
hist(conservation_data$taxon,
main = "Distribution of Conservation Status among Taxons",
xlab = "Taxons",
ylab= "Frequency",
)
hist(conservation_data$conservation_status,
main = "Distribution of Conservation Status among Taxons",
xlab = "Conservation Status",
ylab= "Frequency",
)
ggplot(conservation_data, aes(x=conservation_status))+geom_bar(position = "stack", stat="count")labs(title = "Distribution of Conservation Status among Taxons")
ggplot(conservation_data, aes(x=conservation_status))+geom_bar(position = "stack", stat="count")+labs(title = "Distribution of Conservation Status among Taxons")
ggplot(taxon, aes(x=conservation_status,fill = conservation_status))+geom_bar(position = "fill", stat="count")+labs(title = "Relative Distribution of Conservation Status Within Each Taxonomic Group",
x = "Taxonomic Group",
y = "Proportion",
fill = "Conservation Status")
ggplot(conservation_data, aes(x=taxon,fill = conservation_status))+geom_bar(position = "fill", stat="count")+labs(title = "Relative Distribution of Conservation Status Within Each Taxonomic Group",
x = "Taxonomic Group",
y = "Proportion",
fill = "Conservation Status")
spending <- read.csv("spendingdata.csv")
spending_2016 <- spending[spending$Year == 2016, ]
ggplot(spending_2016, aes(x=spending)) + geom_bar(bins = 30)+labs(title = "Distribution of Spending in 2016",
x = "Spending",
y = "COunt"
)
ggplot(conservation_data, aes(x=taxon,fill = conservation_status))+geom_bar(position = "fill", stat="count")+labs(title = "Relative Distribution of Conservation Status Within Each Taxonomic Group",
x = "Taxonomic Group",
y = "Proportion",
fill = "Conservation Status")
ggplot(spending_2016, aes(x = spending)) +
geom_histogram(bins = 30) +
labs(
title = "Distribution of Conservation Spending in 2016",
x = "Spending",
y = "Count"
)
getwd()
city_df <- data.frame(
city =c("Boston", "New York", "Baltimore", "Charleston", "Maimi", "Corpus Christi"),
gauge = c(8443970,8518750,8574680,8665530,8723214,8775296)
)
city_df
files <- list.files(path="Data", full.names =TRUE)
#read into list
#tidedata <- lapply(files, read.csv)
tidedata <- read.csv(files[1])
spending_2016[which.max(spending_2016$Highest),]
View(spending_2016)
spending_2016[which.max(spending_2016$spending),]
top_3 <- which(spending_2016$spending> quantile(spending_2016$spending, probs=0.99))
top_3
##use decreasing = true to find the outliers
top_3_rows <- order(spending_2016$spending, decreasing = TRUE)[1:3]
spending_2016$species_id[top_3_rows]
top_3_rows
##use decreasing = true to find the outliers
spending_2016$species_id[
order(spending_2016$spending, decreasing = TRUE)[1:3]
]
##use decreasing = true to find the outliers
top_3<- order(spending_2016$spending, decreasing = TRUE)[1:3]
top_3_rows
spending_2016$speciesid=[top_3_rows]
##use decreasing = true to find the outliers
top_3<- order(spending_2016$spending, decreasing = TRUE)[1:3]
top_3_rows
spending_2016$speciesid= top_3_rows
##use decreasing = true to find the outliers
spending_2016$speciesid[
order(spending_2016$spending, decreasing = TRUE)[1:3]
]
##use decreasing = true to find the outliers
outliers <- spending_2016$speciesid[
order(spending_2016$spending, decreasing = TRUE)[1:3]
]
top_3_rows <- order(spending_2016$spending, decreasing = TRUE)[1:3]
spending_2016$speciesid[[top_3_rows]]
#use common clumn name to merge
merged_data <- merge(
spending,
conservation_data,
by = "speciesid"
)
top_3 <- merged_data %>%
filter(year == 2016) %>%
arrange(desc(spending)) %>%
slice(1:3)
##use decreasing = true to find the outliers
tops_3 <- spending_2016$speciesid[
order(spending_2016$spending, decreasing = TRUE)[1:3]
]
top_3 <- subset(merged_data, year == 2016)
top_3 <- subset(merged_data, Year == 2016)
top_3 <- top_3[order(-top_3$spending), ][1:3, ]
top_3$scientific_name
top_3$scientificname
top_3$speciesname
## use subset to remove rows with spending =0
subset(merged_data, spending = 0)
## use subset to remove rows with spending =0
subset(merged_data, spending == 0)
## use subset to remove rows with spending =0
subset(merged_data, spending != 0)
##creat a new row withe th elogarithm of each spending year
merged_data$logspending <- (log(spending))
View(merged_data)
## use subset to remove rows with spending =0
merged_data <- subset(merged_data, spending != 0)
##creat a new row withe th elogarithm of each spending year
merged_data$logspending <- log(merged_data$spending)
mod <- lm(logspending~taxon, data = merged_data)
sum_mod<-summary(mod)
sum_mod$coefficient
mod <- lm(logspending~taxon, data = merged_data)
sum_mod<-summary(mod)
sum_mod$coefficients
